<!DOCTYPE html>
<html lang="en">
  <head
    prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb# website: https://ogp.me/ns/website#"
  >
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="email=no,telephone=no,address=no" />

    <title>Not Found.</title>
    <meta name="description" content="404 Error, Page Not Found" />

    <meta name="robots" content="index,follow" />

    <meta property="og:title" content="Not Found." />
    <meta property="og:description" content=" 404 Error, Page Not Found" />
    <meta property="og:image" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@daik_dev" />
  </head>
  <body>
    <noscript> You need to enable JavaScript to run this app </noscript>

    <script type="text/javascript">
      const historyApiFallback = () => {
        // url to be accessed
        // https://name.github.io/repo-name/hoge/piyo

        const url = new URL(window.location)

        // from src/page/404.tsx to 404.html
        if (url.searchParams.get('NotFound') === 'true') {
          url.searchParams.delete('NotFound')
          window.history.replaceState(null, null, url.href)
          return
        }

        // https://name.github.io/
        const originUrl = window.location.origin

        // [repo-name, hoge, piyo]
        const pathList = window.location.pathname.split('/').slice(1)

        const repoName = pathList.slice(0, 1)
        const queryParams = pathList.slice(1).join('/')

        // redirect to https://name.github.io/repo-name/
        // (add query params with URI encoded)
        const newUrl = `${originUrl}/${repoName}?originalPath=${encodeURIComponent(
          queryParams
        )}`

        window.location.replace(newUrl)
      }
      historyApiFallback()
    </script>

    <h1>404 Error, Page Not Found</h1>
  </body>
</html>
