<!DOCTYPE html>
<html lang="en">
  <head
    prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb# website: https://ogp.me/ns/website#"
  >
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="format-detection" content="email=no,telephone=no,address=no" />

    <title>Not Found.</title>
    <meta name="description" content="404 Error, Page Not Found" />

    <meta name="robots" content="index,follow" />

    <meta property="og:title" content="Not Found." />
    <meta property="og:description" content=" 404 Error, Page Not Found" />
    <meta property="og:image" content="" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@daik_dev" />
  </head>
  <body>
    <noscript> You need to enable JavaScript to run this app </noscript>

    <script type="text/javascript">
      const historyApiFallback = () => {
        // url to be accessed
        // https://name.github.io/repo-name/hoge

        const url = new URL(window.location)

        // from src/page/404.tsx to 404.html
        if (url.searchParams.get('notFound') === 'true') {
          url.searchParams.delete('notFound')
          window.history.replaceState(null, null, url.href)
          return
        }

        // ['', repo-name, hoge]
        const pathList = window.location.pathname.split('/')

        // /repo-name/
        url.pathname = `/${pathList[1]}/`

        // create url and add query params
        pathList.splice(0, 2)
        const queryParams = pathList.map((item) => `/${item}`).join('')
        url.searchParams.append('originalPath', queryParams)

        // redirect to https://name.github.io/repo-name/?originalPath=/hoge
        window.location.replace(url.href)
      }
      historyApiFallback()
    </script>

    <h1>404 Error, Page Not Found</h1>
  </body>
</html>
